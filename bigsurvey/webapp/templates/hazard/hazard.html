{% extends 'base.html' %}
{% load i18n %}
{% load boolean_yes_no %}
{% load hazards_for_services %}
{% load staticfiles %}
{% block menu %}
    <li><a href="{% url 'webapp:hazard_edit' hazard.pk %}" id="hazard_{{ hazard.pk }}_edit_link">{% trans "Edit" %}</a></li>
    <li><a href="{% url 'webapp:site_detail' hazard.site.pk %}">{% trans "Back to Site" %}</a></li>
{% endblock %}
{% block content %}
    <div class="wrapper">
        {% include 'messages.html' %}
        <table class="uk-table border-none">
            <tbody>
            <tr>
                <td class="uk-text-right uk-text-muted">{% trans "Site" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.site }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Service Type" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.service_type }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Hazard Type" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.hazard_type }}</td>
            </tr>
            <tr>
                <td class="uk-text-right uk-text-muted">{% trans "Location 1" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.location1 }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Location 2" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.location2 }}</td>
                <td colspan="2"></td>
            </tr>
            <tr class="border-bottom">
                <td class="uk-text-right uk-text-muted">{% trans "Description" %}</td>
                <td class="uk-text-center uk-text-primary" colspan="5">{{ hazard.notes }}</td>
            </tr>
            <tr>
                <td class="uk-text-right uk-text-muted">
                    <label>{% trans "Geolocation" %}</label>
                </td>
                <td colspan="5">
                    <div id="mapholder" style="height: 250px;"></div>
                    <br/>

                    <p id="notification"></p>
                </td>
            </tr>
            <tr class="border-bottom">
                <td class="uk-text-right uk-text-muted">{% trans "Latitude" %}</td>
                <td class="uk-text-center uk-text-primary" id="latitude">{{ hazard.latitude }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Longitude" %}</td>
                <td class="uk-text-center uk-text-primary" id="longitude">{{ hazard.longitude }}</td>
                <td colspan="2"></td>
            </tr>
            <tr>
                <td class="uk-text-right uk-text-muted">{% trans "Assembly Status" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.assembly_status|yn }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Assembly Location" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.assembly_location }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Installed Properly" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.installed_properly|yn }}</td>
            </tr>
            <tr>
                <td class="uk-text-right uk-text-muted">{% trans "Installer" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.installer }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Install Date" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.install_date }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Replace Date" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.replace_date }}</td>
            </tr>
            <tr>
                <td class="uk-text-right uk-text-muted">{% trans "Orientation" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.orientation }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "BP Type Present" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.bp_type_present }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "BP Size" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.bp_size }}</td>
            </tr>
            <tr class="border-bottom">
                <td class="uk-text-right uk-text-muted">{% trans "Manufacturer" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.manufacturer }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Model No." %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.model_no }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Serial No." %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.serial_no }}</td>
            </tr>
            <tr class="border-bottom">
                <td class="uk-text-right uk-text-muted">{% trans "BP Type Required" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.bp_type_required }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Due Install/Test" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.due_install_test_date }}</td>
                <td class="uk-text-right uk-text-muted">{% trans "Regulation" %}</td>
                <td class="uk-text-center uk-text-primary">{{ hazard.regulation_type }}</td>
            </tr>
            <tr>
                <td></td>
                <td class="uk-text-right uk-text-muted">{% trans "Photo" %}</td>
                <td class="uk-text-center uk-text-primary" colspan="2">
                    {% if hazard.photo %}
                        <a href="{{ hazard.photo.url }}" target="_blank">
                            <img src="{{ hazard.photo_thumb.url }}"/>
                        </a>
                    {% else %}
                        <span>{% trans "No photo available" %}</span>
                    {% endif %}
                </td>
                <td colspan="2"></td>
            </tr>
            </tbody>
        </table>
    </div>
    {% if perms.webapp.browse_test %}
        <h3 class="uk-text-center">{% trans "Tests" %}</h3>
        <div>
            {% include 'test/test_include_list.html' %}
        </div>
    {% endif %}
{% endblock %}
{% block scripts %}
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
    <script src="{% static "js/custom/google_map.js" %}"></script>
    <script type="text/javascript">
        window.onload = function () {
            showDetailMap();
        }
    </script>
{% endblock %}